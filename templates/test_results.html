{% extends "includes/base.html" %}

{% block title %}Результаты теста - Центр подготовки ЕГЭ ОГЭ{% endblock %}

{% block content %}
<div class="container">
    <!-- Results Content -->
    <div class="page-content">
        <h1 class="page-title">Результаты теста</h1>
        
        {% if finished_early %}
        <div class="page-text" style="text-align: center; background-color: #fff3cd; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #ffc107;">
            <p style="margin: 0; color: #856404; font-weight: bold;">⚠️ Тест завершен досрочно</p>
            <p style="margin: 5px 0 0 0; color: #856404; font-size: 14px;">Отвечено: {{ total }} из {{ total_questions }} вопросов</p>
        </div>
        {% endif %}
        
        <div class="results-stats">
            <div class="results-score">{{ correct }}/{{ total }}</div>
            <div class="results-text">Правильных ответов</div>
            <div class="results-percentage">{{ percentage }}%</div>
            {% if finished_early %}
            <div style="font-size: 14px; color: #666; margin-top: 10px;">
                Из {{ total_questions }} вопросов
            </div>
            {% endif %}
        </div>
        
        <div class="page-text" style="text-align: center;">
            {% if percentage >= 80 %}
                <p style="font-size: 24px; color: #4CAF50; font-weight: bold;">Отлично! Вы отлично справились с тестом!</p>
            {% elif percentage >= 60 %}
                <p style="font-size: 24px; color: #FFA500; font-weight: bold;">Хорошо! Продолжайте готовиться!</p>
            {% elif percentage >= 40 %}
                <p style="font-size: 24px; color: #FF9800; font-weight: bold;">Неплохо! Есть над чем поработать.</p>
            {% else %}
                <p style="font-size: 24px; color: #f44336; font-weight: bold;">Нужно больше практики. Не отчаивайтесь!</p>
            {% endif %}
        </div>
        
        {% if subject_stats %}
        <div class="subject-stats">
            <h2 class="page-subtitle">Результаты по предметам:</h2>
            {% for stat in subject_stats %}
            <div class="subject-stat-item">
                <div class="subject-stat-name">{{ stat.name }}</div>
                <div class="subject-stat-score">{{ stat.correct }}/{{ stat.total }} ({{ stat.percentage }}%)</div>
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        <div style="text-align: center; margin-top: 40px;">
            <a href="{{ url_for('general_test') }}" class="menu-btn btn-primary" style="display: inline-block; text-decoration: none; max-width: 300px;">
                Пройти тест снова
            </a>
        </div>
        
        <!-- Back Button -->
        <div style="text-align: center; margin-top: 30px;">
            <a href="{{ url_for('index') }}" class="back-btn">← На главную</a>
        </div>
    </div>
{% endblock %}